# 企业级会议系统 - 产品需求文档

## 1. 项目概述

### 1.1 项目背景
企业级会议系统旨在为企业提供一个高效、智能的会议预约和管理平台，解决传统会议预约流程繁琐、资源冲突、信息不透明等问题。

### 1.2 项目目标
- 提供便捷的会议预约功能
- 实现会议室资源的智能化管理
- 提升会议效率和用户体验
- 支持企业级权限管理和审计需求

## 2. 核心功能模块

### 2.1 会议预约管理（核心功能）
- **会议创建**：用户可以创建新的会议预约
- **时间安排**：选择会议时间、时长
- **会议室选择**：根据需求选择合适的会议室
- **参会人员邀请**：邀请内部员工和外部访客
- **会议审批**：重要会议需要审批流程
- **会议变更**：支持会议时间、地点、人员的调整
- **会议取消**：提供会议取消功能
 - **AI预约入口**：支持通过文字对话进行会议预约，系统引导用户完成信息收集、冲突检测与确认
 - **模式切换**：用户可在对话式预约与传统表单预约之间自由切换，保持上下文与已填信息不丢失

### 2.2 会议室管理
- **会议室信息**：维护会议室基本信息（容量、设备、位置等）
- **资源管理**：管理会议室设备（投影仪、白板、视频会议设备等）
- **可用性查询**：实时查看会议室可用状态
- **冲突检测**：自动检测时间冲突
- **会议室预订**：支持长期预订和循环会议

### 2.3 用户权限管理
- **角色定义**：管理员、部门经理、普通员工、访客
- **权限控制**：
  - 管理员：系统管理、所有会议室预约权限
  - 部门经理：部门内会议管理、审批权限
  - 普通员工：创建和参与会议
  - 访客：仅参与被邀请的会议
- **组织架构**：支持多级组织架构

### 2.4 会议通知与提醒
- **邮件通知**：会议邀请、变更、取消通知
- **系统消息**：站内消息提醒
- **移动端推送**：支持移动端推送通知
- **会前提醒**：会议开始前自动提醒

### 2.5 会议统计与分析
- **使用统计**：会议室使用率统计
- **参会分析**：参会人员出勤率分析
- **成本分析**：会议成本统计（可选）
- **报表导出**：支持数据导出

## 3. 用户角色与场景

### 3.1 主要用户角色
1. **普通员工**
   - 创建个人会议
   - 查看会议室可用性
   - 邀请同事参会
   - 管理个人会议日程

2. **部门经理**
   - 管理部门会议
   - 审批部门内重要会议
   - 查看部门会议统计
   - 管理会议室权限

3. **系统管理员**
   - 系统配置管理
   - 用户和权限管理
   - 会议室资源管理
   - 系统监控和维护

4. **访客用户**
   - 接收会议邀请
   - 查看会议信息
   - 确认参会状态

### 3.2 核心业务场景

#### 场景1：日常会议预约
1. 员工登录系统
2. 选择会议时间和预计时长
3. 系统推荐可用会议室
4. 选择会议室并填写会议信息
5. 邀请参会人员
6. 系统发送会议邀请
7. 会议开始前收到提醒

#### 场景2：重要会议审批
1. 员工创建重要会议
2. 系统自动识别需要审批
3. 发送审批请求给上级
4. 上级审批通过
5. 会议预约成功
6. 通知所有参会人员

#### 场景3：会议室资源冲突处理
1. 两个用户同时预约同一会议室
2. 系统自动检测冲突
3. 提示用户选择其他时间或会议室
4. 提供替代方案推荐

#### 场景4：AI对话式预约入口
1. 用户打开AI预约入口，输入自然语言需求（如“明天下午两点开个1小时的项目评审，10人，需要视频会议设备”）
2. 系统通过多轮对话补齐关键信息（时间、时长、人数、设备、会议室偏好、参与人）
3. 实时冲突检测并给出替代方案（更合适的时间段或会议室）
4. 生成预约摘要并二次确认（含会议详情、参会人、会议室、审批需求）
5. 预约成功后自动发送通知；用户可一键切换到传统表单查看与编辑

## 4. 非功能性需求

### 4.1 性能要求
- 支持1000+并发用户
- 页面响应时间<2秒
- 系统可用性>99.9%

### 4.2 安全要求
- 用户身份认证
- 数据传输加密
- 操作日志记录
- 权限控制
 - AI安全防护：提示注入防护、敏感信息过滤、参数边界校验、人工审阅兜底（针对关键审批场景）

### 4.3 可用性要求
- 7×24小时可用
- 支持移动端访问
- 跨浏览器兼容
 - 语义容错与引导：AI对话可识别模糊表达并进行澄清，支持中英双语
 - 可访问性：对话与表单均遵循无障碍规范，支持键盘操作与屏幕阅读

### 4.4 扩展性要求
- 支持多组织架构
- 模块化设计
- 易于集成第三方系统

## 5. 项目里程碑

### 第一阶段（MVP）
- 基础会议预约功能
- 用户注册登录
- 会议室管理
- 基础权限控制

### 第二阶段
- 会议审批流程
- 移动端适配
- 统计分析功能
- 第三方集成

### 第三阶段
- 高级功能（视频会议集成等）
- AI智能推荐
- 高级分析报表
- 企业级特性

### MVP每周开发计划与任务追踪（第一阶段）

- 目标：以模块化单体架构快速交付可用的会议预约最小闭环（传统表单 + AI对话入口），不做过度设计。

-1）第1周：基础工程与环境搭建
- [x] 前端初始化：React 19 + TypeScript + Tailwind CSS + Ant Design + Vite
- [x] 后端初始化：NestJS 11 + Prisma 6（PostgreSQL 17）+ Redis 8
- [x] 部署环境：Docker Compose 一键启动；最小Nginx反向代理
- [x] 对象存储：接入 MinIO（通过标准 AWS S3 SDK），准备基础上传接口
- [x] 基础健康检查：/health 与数据库连接校验
- [x] 产出：仓库结构、Prisma 初始 schema、数据库迁移、docker-compose 可启动
- 验收：一键启动成功；/health=200；Prisma 能迁移并连接

2）第2周：用户与权限MVP
- [x] 用户注册/登录与 JWT 认证
- [x] RBAC 最小角色集：管理员、部门经理、普通员工、访客
- [x] 组织架构模型基础（部门、成员关系）
- [x] 前端登录页与基础布局、受保护路由
- 验收：登录成功、角色受限操作生效、受保护接口返回正确

3）第3周：会议室管理MVP
- [x] 会议室 CRUD（容量、设备、位置、状态）与列表/表单 UI
- [x] 可用状态维护与基础筛选
- [x] 文件上传：会议室图片/附件通过 S3 SDK 写入 MinIO
- 验收：会议室 CRUD 流程可用；列表分页；文件上传成功可访问

4）第4周：传统会议预约流程MVP
- 范围与用户故事
  - 员工创建一次性会议：填写标题、描述、开始时间、时长/结束时间、人数、设备需求，选择会议室并邀请参会人
  - 会议变更与取消：创建者或管理员可调整时间/会议室/参会人，或取消会议并通知参会人
  - 冲突提示与替代建议：当会议室或参会人时间冲突时，系统给出替代时间窗口与可用会议室建议
- 前端功能
  - [x] 预约创建表单：字段与校验（必填项、时间合法性），提交前可进行可用性预检
  - [x] 列表与筛选：支持关键词、时间范围、会议室、发起人筛选与分页；支持状态筛选（SCHEDULED/IN_PROGRESS/COMPLETED/CANCELLED）
  - [x] 详情页操作：展示会议详情、会议室与参会人列表；支持变更与取消操作；冲突时自动应用建议时间窗
- 后端 API（示例）
  - POST `/meetings`：创建会议；请求体包含标题、描述、startTime、endTime/时长、roomId、participants[]、equipment[]；若冲突返回 `409` 并包含 `suggestions`
  - GET `/meetings`：查询列表；支持 `keyword`、`startFrom`、`endTo`、`roomId`、`creatorId`、`status`、分页参数
  - GET `/meetings/:id`：查询详情
  - PATCH `/meetings/:id`：变更会议（时间/会议室/参会人）；变更前进行冲突检测
  - POST `/meetings/:id/cancel` 或 DELETE `/meetings/:id`：取消会议；写入状态并触发通知
  - GET `/meetings/availability`：根据时间范围与人数/设备需求，返回可用会议室列表与建议时间段
- 冲突检测规则（简版）
  - 会议室冲突：与非 CANCELLED 的会议存在任一时间段重叠则冲突（含包含/交叉/被包含三种情况）
  - 参会人忙闲：被邀请的用户在同一时间段参与其他非 CANCELLED 会议则冲突
  - 替代建议：
    - 时间建议：在目标时间左右 ±30/60 分钟范围内搜索空档窗口
    - 会议室建议：在相同容量与设备满足条件下返回可用房间列表，按容量升序
- 通知与消息
  - [x] 触发场景：创建成功、时间/会议室变更、取消会议（Mock）
  - [x] 传输方式：SMTP 或 Mock（当前为 Mock）
  - [x] 内容要素：会议标题、时间段、会议室、参会人列表、变更摘要
- 权限与审批
  - 权限：
    - [x] ADMIN/MANAGER：可查询/管理其范围内会议；可变更/取消；可创建跨部门会议
    - [x] EMPLOYEE：可创建与管理本人创建的会议；不可变更他人会议
    - [x] GUEST：仅可查看被邀请的会议信息，不可创建/变更
  - 审批（简版）：
    - [ ] 当会议室 `needApproval=true` 或人数超过阈值（默认 20）时进入 `PENDING_APPROVAL`，提供审批通过/拒绝接口
- 验收标准
  - 成功创建：请求校验通过、写库成功、返回会议详情；触发通知或 Mock
  - 冲突提示：当存在会议室/参会人冲突时返回 409 与替代时间/会议室建议
  - 列表分页：在 50+ 条数据下分页正确、筛选组合条件生效
  - 变更与取消：更新写库成功并触发通知；取消后状态为 `CANCELLED`
  - 可用性查询：在给定时间范围返回正确的可用会议室集合
- 数据与一致性
  - 事务：创建/变更/取消操作使用数据库事务，保证会议与参会人关系一致
  - 并发：通过唯一性与冲突检测避免双重预订；高并发下保持一致性

5）第5周：AI对话式预约MVP
- 前端聊天界面与对话引导（槽位填充/澄清提问）
- 后端 AI 预约模块（意图识别/槽位填充），LLM 网关可替换实现
- 对话与表单双向切换并保留上下文；最小安全防护（提示注入、敏感词过滤）
- 验收：通过对话完成完整预约；切换表单保留信息；关键安全校验生效

6）第6周：收尾与发布
- 数据校验与异常处理完善；分页与索引优化；热点缓存
- Docker Compose 部署文档与环境变量清单；管理员基础配置页
- 缺陷清单收敛与验收测试用例
- 验收：端到端流程稳定；一键启动；关键缺陷关闭

任务追踪方式（建议）
- 每周维护目标与任务清单，标注状态：待办/进行中/已完成；记录负责人与预估/实际
- 风险与阻碍每日更新（依赖、环境、接口、性能等）；明确下步行动项
- 每日站会要点：昨日完成/今日计划/阻碍；周末回顾与复盘

## 6. 技术选型建议

### 前端技术
- **框架**：React 19.x + TypeScript 5.x（最新稳定版，支持新特性）
- **页面样式**：Tailwind CSS 3.4.x（最新稳定版）
- **组件库**：Ant Design 5.x（企业级UI组件库）
- **状态管理**：Zustand 5.x（轻量级、高性能，适合企业级应用）
- **构建工具**：Vite 6.x（最新稳定版，性能更优）
- **路由管理**：React Router 7.x（最新稳定版）
- **HTTP客户端**：Axios 1.x
- **表单处理**：React Hook Form 7.x
- **日期处理**：Dayjs 1.x

### 后端技术
- **运行时**：Node.js 24.x LTS（最新LTS版本，代号'Krypton'，支持到2028年4月）
- **框架**：NestJS 11.x（最新稳定版，企业级Node.js框架）
- **语言**：TypeScript 5.x
- **数据库**：PostgreSQL 17.x（最新稳定版，性能优化）
- **缓存**：Redis 8.x（最新稳定版）
- **消息队列**：RocketMQ 5.3.x（最新稳定版，阿里巴巴开源，高性能、高可靠）
- **数据库ORM**：Prisma 6.x（最新稳定版，类型安全、开发体验优秀）
- **API文档**：Swagger/OpenAPI 3.x
- **认证授权**：JWT + Passport
- **验证框架**：class-validator 0.14.x

### 部署方案
**第一阶段（私有化部署）**：
- **容器化**：Docker + Docker Compose
- **编排**：Docker Compose（支持一键部署）
- **反向代理**：Nginx
- **SSL证书**：Let's Encrypt
- **监控**：基础监控（容器健康检查）

**第二阶段（K8s部署）**：
- **容器编排**：Kubernetes
- **包管理**：Helm Charts
- **服务网格**：Istio（可选）
- **监控告警**：Prometheus + Grafana
- **日志收集**：ELK Stack

## 7. 风险分析

### 技术风险
- 系统性能瓶颈
- 数据安全风险
- 第三方服务依赖

### 业务风险
- 用户接受度
- 业务流程复杂性
- 合规性要求

### 缓解措施
- 充分的技术调研
- 渐进式开发
- 用户反馈机制
- 安全审计

---

*本文档为初版，后续根据实际需求进行调整和完善*
